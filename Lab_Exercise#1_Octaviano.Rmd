---
title: "Lab_Exercise#1_Octaviano"
output: pdf_document
date: "2024-02-08"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
install.packages("dplyr")
install.packages("rvest")
install.packages("httr")
install.packages("polite")

library(dplyr)
library(rvest)
library(httr)
library(polite)

polite::use_manners(save_as = 'polite_scrape.R')

```

```{r}

url <-"https://www.amazon.com.au/s?k=watch&rh=n%3A4851856051%2Cp_89%3ACasio&dc&ds=v1%3AS2ltH4Ih3oCwQeYX5MyeSbudTkl3k1DbUmqpqQkvtAk&crid=ZE50TD11CX0I&qid=1707656659&rnid=5373057051&sprefix=watch%2Caps%2C931&ref=sr_nr_p_89_1"

session <- bow(url, user_agent= "Educational Purposes")
session

```
SCRAPING FOR WATCH

```{r}
watch_products <- data.frame()

watchlink1 = "https://www.amazon.com.au/s?k=watch&rh=n%3A4851856051%2Cp_89%3ACasio&dc&ds=v1%3AS2ltH4Ih3oCwQeYX5MyeSbudTkl3k1DbUmqpqQkvtAk&crid=ZE50TD11CX0I&qid=1707656659&rnid=5373057051&sprefix=watch%2Caps%2C931&ref=sr_nr_p_89_1"

session1 <- bow(watchlink1,
           user_agent = "For Educational Purpose")

scrapeNodes <- function(selector){
scrape(session) %>%
  html_nodes(selector) %>%
  html_text(trim = TRUE)
}

scrapedCategory <- "Watch"

scrapedName <- scrapeNodes("h2.a-size-mini.a-spacing-none.a-color-base.s-line-clamp-4")
scrapedName <- scrapedName[1:45]

scrapedPrice <- scrapeNodes("span.a-offscreen")
scrapedPrice <- scrapedPrice[1:45]

scrapedRatings <- scrapeNodes("span.a-icon-alt")
scrapedRatings <- scrapedRatings[1:45]

scrapedReviews <- scrapeNodes("span.a-size-base.s-underline-text")
scrapedReviews <- scrapedReviews[1:45]



watch_products <- rbind(watch_products, data.frame(category = scrapedCategory,name = scrapedName,
                    price = scrapedPrice,
                    ratings = scrapedRatings,
                    no_of_reviews = scrapedReviews))

View(all_reviews)


#install.packages("usethis")
library(usethis)
```
